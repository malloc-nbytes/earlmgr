module ShowModules

import "std/system.earl"; as sys

@pub fn show(import_envvar) {
    let location = env(import_envvar);
    foreach mod in sys::ls(location) {
        let prefix = mod.split("/").rev()[0];
        let files = sys::ls(mod);

        println(f"+ {prefix} [prefix] (", len(files), " files)");
        foreach f in files {
            let filename = f.split("/").rev()[0];
            println(f"|-- {filename} [module]");
        }
        println("*");
    }
}
